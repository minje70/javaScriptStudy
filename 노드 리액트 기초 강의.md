# boilerplate

## Boilerplate 란 [존 안](https://www.inflearn.com/course/%EB%94%B0%EB%9D%BC%ED%95%98%EB%A9%B0-%EB%B0%B0%EC%9A%B0%EB%8A%94-%EB%85%B8%EB%93%9C-%EB%A6%AC%EC%95%A1%ED%8A%B8-%EA%B8%B0%EB%B3%B8/lecture/37061)

변경 없이 계속하여 재 사용할 수 있는 코드를 말한다.

이 후 중복되는 설명을 최대한 없애기 위해서 만든 강좌라고 함.

### NODE JS란?? EXPRESS JS 란?

- Node js는 하나의 언어로 자바스크립트를 서버사이드에서 사용할 수 있는 언어이다.
- express js는 프레임워크로 node js를 사용하여 서버를 만들 수 있는 도구이다.



### node js 받기.

##### node js가 있는지 확인

- 터미널에서 `node -v` 입력



##### [node 다운로드](https://nodejs.org/ko/)



##### npm init

- 실행하면 기본 세팅파일인 package.json을 만들어 준다.

##### index.js

- 백엔드의 시작점이다.

##### express 다운로드

- 터미널에서 `npm install express --save` 입력
- 받으면 package.json에 `"express": "^4.17.1"`이 추가된다.
- Node_modules라는 폴더도 추가 된다.

##### mongoldb

- Mongoldb.com 회원가입.
- create new cluster
  - aws, singapore, m0(free)선택
- cluster가 생성되면 connect에 들어가서 username과 password를 입력 후 다 확인
- application code가 나오면 복붙해서 저장해두기.

##### mongoose

- mongodb를 편하게 쓸 수 있는 Object Modeling Tool이다.
- 터미널에 `npm install mongoose --save`를 입력하면 추가된다.
- Index.js에 코드를 추가한다.

``` javascript
const mongoose = require('mongoose')
mongoose.connect('mongodb+srv://mijeong:ch79854622@boilerplate.w1dqh.mongodb.net/myFirstDatabase?retryWrites=true&w=majority', {
	useNewUrlParser: true, useUnifiedTopology: true, useCreateIndex: true, useFindAndModify: false
}).then(() => console.log('MongoDB Connected...'))
	.catch(err => console.log(err))
```

- 터미널에 `npm run start`를 입력한다.

###### 😂주의사항

- password입력하는 부분에 <>는 없애기
- cluster 컴퓨터에서는 방화벽 때문에 mongodb에서 맥으로 접근을 못하는거 같다.
- network access에서 현재 ipaddress를 등록해줘야한다.

### Model & Schema

- model : schema를 감싸주는 것.
- schema : 찾아보기. (설명이 너무 부실.)

``` javascript
const mongoose = require('mongoose'); // 모듈을 가져오는 부분.

const userSchema = mongoose.Schema({
	name: {
		type: String,
		maxlength: 50,
	},
	email: {
		type: String,
		trim: true, // email에 있는 공백을 없애준다.
		unique: 1 // 등록을 하나만 할 수 있게 해준다.
	},
	password: {
		type: String,
		minlength: 5,
	},
	lastname: {
		type: String,
		maxlength: 50,
	},
	role: {
		type: Number,
		default: 0, // 유저가 될 수 있고 관리자가 될 수 있다. 그런 grade를 정하는 듯 싶다.
	},
	image: String,
	token: {
		type: String, // 유효성 관리를 위함.
	},
	tokenExp: { // 토큰을 사용할 수 있는 기간.
		type: Number,
	},
})

const User = mongoose.model('User', userSchema) // userschema를 model로 감싸준다.

module.exports = { User } // 다른 곳에서도 사용할 수 있게 exports해준다.
```

### git

git 저장소에 node_modules를 올릴 필요는 없다. 일단 용량이 많고 `npn install` 을 하면 `package.json`에 설치할 module에 대한 정보가 있기 때문에 알아서 설치가 된다.